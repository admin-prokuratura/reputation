# Reputation Hunter Bot

Телеграм-бот для поиска и аналитики репутации пользователей в чатах.

## Возможности

- Сбор репутационных сообщений (+rep / -rep и вариации) во всех чатах, где присутствует бот.
- Inline-режим с быстрыми подсказками: «Посмотреть всю репутацию» и «Посмотреть в чате».
- Кнопка «Детальный анализ» с ссылками на оригинальные сообщения.
- Команда `/id` для получения идентификатора текущего чата.
- Админ-панель с управлением паузой, корректировкой репутации, рассылками и списками пользователей/чатов.
- Поддержка ручных корректировок (накрутка или обнуление) и массовых рассылок по группам/личным сообщениям.

## Запуск

1. Установите зависимости:

   ```bash
   pip install -e .
   ```

2. Создайте файл `.env` со следующими переменными:

   ```env
   BOT_TOKEN=ваш_токен
   ADMIN_IDS=123456789,987654321
   DATABASE_PATH=data/reputation.db
   ```

3. Запустите бота:

   ```bash
   python -m bot.main
   ```

## Основные команды

- `/rep username "Название чата"` — открыть подсказки для inline-поиска.
- `/id` — показать идентификатор текущего чата.
- `/admin` — открыть админ-панель (только для администраторов).
- Управление репутацией, блокировками пользователей, рассылками и списком групп теперь выполняется из админ-панели через встроенные кнопки.

## Структура данных

Бот использует SQLite с таблицами для групп, пользователей, репутационных сообщений и ручных корректировок. Все сообщения хранятся с ссылками на оригиналы, что позволяет делать «детальный анализ» даже если сообщение было удалено в чате.

## Примечания

- Бот корректно работает без прав администратора — достаточно присутствовать в чате, чтобы считывать новые сообщения.
- Для чатов, где сообщения с репутацией удаляются, записи сохраняются в базе, а при повторных проверках добавляются только новые сообщения по `message_id`.
- Дизайн сообщений использует современную HTML-разметку и эмодзи для улучшения восприятия.
